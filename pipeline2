pipeline {
    agent any
    environment {
        REGION_GCP = "us-central1"
        ZONE_GCP = "us-central1-a"
        IMAGE_NAME = "docker-cloud"
        PROJECT_ID = "mythic-inn-420620"
        IMAGE_TAG = "latest"
        DOCKER_HUB = "ganesh6498/docker-cloud"
        ARTIFACT_REPO = "$REGION_GCP-docker.pkg.dev/$PROJECT_ID/my-docker-repo/${IMAGE_NAME}"
    }

    stages {
        stage("Git Clone") {
            steps {
                git branch: 'main', url: 'https://github.com/ganesh-redy/docker-pipe-cloud-run.git'
            }
        }

    }
       

        stage("Run Terraform & Push Docker Image in Parallel") {
          sh '''
          terraform destory --auto-approve
          '''
            }

    

    post {
        success {
            echo "Pipeline completed successfully! üöÄ"
        }
        failure {
            echo "Pipeline failed! ‚ùå"
        }
    }

}
